version: '3.1'
########## SERVICES ########
services:

###### Watchtower allows for automatically updating and restarting containers
    watchtower:
      image: v2tec/watchtower:latest
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock:rw
      command: --interval 360 --label-enable --cleanup
      labels:
        - com.centurylinklabs.watchtower.enable=true
      environment:
        - TZ=${TZ}
      restart: always

###### Mongodb
    mongodb:
      image: mongo:2.6
      labels:
        - com.centurylinklabs.watchtower.enable=true
      command: --nohttpinterface
      restart: always

###### HBmonitoring
    hbmonitoring:
      image: extremeshok/hbmonitoring:latest
      depends_on:
        - mongodb
      command: sleep 1d
      labels:
        - com.centurylinklabs.watchtower.enable=true
      environment:
        - TZ=${TZ:-UTC}
        - MONGOSERVER=${MONGOSERVER:-}
        - HB_URL=${HB_URL:-}
        - HB_USERNAME=${HB_USERNAME:-}
        - HB_PASSWORD=${HB_PASSWORD:-}
      ports:
        - 8082:8082
      restart: always
